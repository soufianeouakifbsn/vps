#!/bin/bash

echo "๐จ ุจุฏุก ุนูููุฉ ุงูุชูุธูู ุงููุงููุฉ ูู Docker ู ngrok..."

# ุฅููุงู ูู ุงูุญุงููุงุช
echo "๐ ุฅููุงู ูู ุงูุญุงููุงุช..."
sudo docker stop $(docker ps -aq) 2>/dev/null

# ุญุฐู ูู ุงูุญุงููุงุช
echo "๐๏ธ ุญุฐู ุฌููุน ุงูุญุงููุงุช..."
sudo docker rm $(docker ps -aq) 2>/dev/null

# ุญุฐู ูู ุงูุตูุฑ
echo "๐งผ ุญุฐู ุฌููุน ุงูุตูุฑ (Images)..."
sudo docker rmi $(docker images -q) -f 2>/dev/null

# ุญุฐู ุงูุดุจูุงุช
echo "๐ ุญุฐู ุงูุดุจูุงุช..."
sudo docker network prune -f

# ุญุฐู ุงููุฌูุฏุงุช ุงููุฑุชุจุทุฉ ุจุงูุญุฌู (Volumes)
echo "๐ ุญุฐู ุงูุฃุญุฌุงู..."
sudo docker volume prune -f

# ุญุฐู ูููุงุช ngrok
echo "๐งน ูุชู ุนูููุงุช ngrok ุงููุดุทุฉ..."
pkill -f "ngrok" || echo "โ๏ธ ูู ูุชู ุงูุนุซูุฑ ุนูู ngrok ุดุบุงู"

# ุญุฐู ุงููููุงุช ุงููุชุจููุฉ
echo "๐งฝ ุญุฐู ูุฌูุฏ n8n ูุงููููุงุช ุงููุชุนููุฉ..."
rm -rf ~/n8n_data ~/compose.yaml ~/ngrok.tgz ~/ngrok.yml

# ุชุญูู
echo "โ ุชู ุชูุธูู ูู ุดูุก! ุฌุงูุฒ ููุจุฏุก ูู ุฌุฏูุฏ ๐"
